demo.guestbook
==============

  Системма приложения demo.guestbook однопользовательская. т.е. есть администрация сайта
к которой через добавление записей  в гостевую могут обращаться зарегистрированные
пользователи. Администрация может оставить ответ к записи в любое время.

 Системма не имеет админки. В место этого для администратора предоставляется расширенный
функционал, на страницах общего пользования.

 Гости могут читать все записи и комментарии к ним. Зарегистрировавшись и затем авториз.
пользователь может оставить свою запись. Также может удалить ее или отредактировать,
если к записи еще нету комментария. Если администратор уже добавил комментарий, запись
становится как бы (утвержденной), и недоступной для редакции автору. Администратор,
имеет полный  контроль над  всеми записями, и  комментариями, в любое время может их 
изменять и удалять. Также администратор может получить профиль любого зарегистрированного
пользователя, просто кликнув по автору записи. Туда же может быть добавлен функционал
управления пользователями.

 Для демонстрации работы приложения имеется готовая база данных SQLite, с небольшим
колличеством уже зарегистрированных пользователей, их записями, и комментариями администр.
Для пробы можно войти в системму под уже готовыми логин/пароль, либо зарегистрировать
собственный.

------------------------------------------------------
  id   login         password          role
------------------------------------------------------
  1.   tazzort      (753bf147)         administrator     
  2.   int21h       (753951)           user
  3.   nicola       (22wr854)          user
  4.   gonzza       (6181934rts)       user
  5.   zxspectrum   (289110Loga)       user
  6.   shift78      (Grom174518jka)    user
  7.   prohxhor     (547RRt8)          user
  8.   alex         (6181934rts)       user
------------------------------------------------------

 
=========================================
    Различает 3 группы пользователей:
=========================================
 
1) guest - имеют возможность просматривать записи оставленные зарегистрированными
           пользователями, и комментарии оставленные администрацией. Также доступен
		   функционал авторизации и регистрации нового аккаунта.

2) user -  зарегистрированный пользователь, прошедший процедуру авторизации. Доступны:
           просмотр всех записей и комментариев, просмотр собственного профиля, создание 
		   новой записи, изменение и удаление собственной записи. Изменение и удаление
		   возможны лишь в том случае, если к записи еще не добавлен комментарий
		   администратора.

3) administrator - управляющий рессурсом. Доступны: профиль любого пользователя, создание
           новой записи, изменение/удаление любой записи. Создание комментария, изменение/
		   удаление комментария.

===================================
    Структура папок приложения.
===================================
	   
protected/                                
    components/                        содержит компоненты для повторного использывания
	    GreetingUser.php               класс 'GreetingUser' для приветствия 
        PhpAuthManager.php             класс 'PhpAuthManager' для загрузки правил RBAC из файла
        UserIdentity.php               класс 'UserIdentity' для аутентификации
        WebUser.php                    класс 'WebUser' для получения роли
    config/                            содержит конфигурационные файлы
        auth.php                       набор ролей для RBAC
        main.php                       файл конфигурации веб-приложения
    controllers/                       содержит файлы классов контроллеров
        CommentController.php          класс контроллера 'CommentController'
        PostController.php             класс контроллера 'PostController'
        UserController.php             класс контроллера 'UserController'
    data/                              содержит пример базы данных
        guestbook.db                   файл БД для SQLite
    models/                            содержит файлы классов моделей
	    Comment.php                    модель для таблицы 'comment'
		Post.php                       модель для таблицы 'post'
        User.php                       модель для таблицы 'user'
    views/                             содержит файлы представлений контроллеров и файлы макетов (layout)
        comment/                       содержит файлы представлений для контроллера 'comment'
		    create.php                 файл представления для действия 'create'
			update.php                 файл представления для действия 'update'
        layouts/                       содержит файлы представлений макетов
		    main.php                   общая для всех страниц разметка
        post/                          содержит файлы представлений для контроллера 'post'
		    _post/                     статические страницы
			    adminwork.php          файл представления панели администратора для записей
				comment.php            файл представления панели администратора для комментария
				userwork.php           файл представления панели user для записей
			_login.php                 файл представления для формы аутентификации
			_post.php                  файл представления для отображения текущей записи
			_statusbar.php             файл представления для отображения управляющей информации user
			create.php                 файл представления для действия 'create'
			index.php                  файл представления для действия 'index'
			update.php                 файл представления для действия 'update'
        user/                          содержит файлы представлений для контроллера 'user'
            login.php                  файл представления для формы аутентификации
            profil.php                 файл представления для действия 'profil'
            profil2.php                файл представления для действия 'profil' администратора
            registration.php           файл представления для действия 'registration'
            registration_ok.php		   файл представления для действия отображения успешной регистрации.
			
====================================
    Структура базы данных SQLite
====================================
			
guestbook.db/
    user/
	    id              int   ai       id пользователя
		login           str            логин пользоввателя
		password        str            пароль пользователя
		created         date           дата и время регистрации
		role            str            роль ('user', 'administrator')
	post/
		id              int   ai       id записи
		user_id         int            id автора
		content         str            сама запись
		created         date           дата и время создания
    comment/
		id              int   ai       id комментария
		post_id         int            id комментируемой записи 
		content         str            сам комментарий
		created         date           дата и время создания
    			